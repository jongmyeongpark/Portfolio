#!/usr/bin/env python
#-*-coding:utf-8-*-

import sys, os

sys.path.append(os.path.dirname(os.path.abspath(os.path.dirname(__file__))) + "/path_planning")

# Module import
from global_path import GlobalPath


# Parameter
# path_name = 'PJ1.npy' # 팔정도
# path_name = 'yaeseon_xy.npy' # 예선
# path_name = 'k_city_bonseon1.npy' # 본선1
#### base frame 
path_name="kcity_final.npy"


# coord = [[935533.3952, 1915847.8771], [935552.5993, 1915884.1017], #사선주차
#     [935569.5335, 1915915.8702], [935579.3531, 1915948.3609], #교차로 좌회전
#     [935575.4682, 1915950.9969], [935544.9304, 1915967.0497], #정적 장애물
#     [935531.2802, 1915959.0985], [935547.7123, 1915905.4404]] #돌발 장애물/일시정지] # 예선

# coord = [[935563.1816, 1915903.6754], #신호등1
#         [935586.7164, 1915947.7902],
#         [935588.4816, 1915951.0988], #신호등2
#         [935610.7220, 1915992.7872],
#         [935629.6625, 1916028.4897], #정적
#         [935647.9035, 1916077.135],
#         [935648.511, 1916079.217], #신호등3
#         [935654.2777, 1916122.8066],
#         [935655.1859, 1916134.1344], #배달
#         [935656.2859, 1916175.065],
#         [935652.9231, 1916186.9488], #신호등4
#         [935643.5607, 1916237.4644],
#         [935625.9914, 1916241.2965], #유턴
#         [935620.1601, 1916230.0689],
#         [935622.9095, 1916230.1263], #횡단보도9
#         [935630.4078, 1916230.2828], 
#         [935640.0328, 1916222.3563], #횡단보도11
#         [935641.2920, 1916211.0805], 
#         [935641.2664, 1916212.5803], #배달
#         [935642.4603, 1916142.5905],
#         [935642.5968, 1916134.5916], #신호등5
#         [935642.7898, 1916111.0950],
#         [935614.2834, 1916014.3736], #신호등6
#         [935598.8626, 1915980.8478],
#         [935591.7988, 1915967.6151], #신호등7
#         [935575.3055, 1915936.7449],
#         [935550.4452, 1915890.22], #평행주차
#         [935516.5127, 1915826.7178]] # 본선... 미션 번호 순서대로

#### 변환할 좌표 넣기
coord = [[935571.9,1915920.5]]

# coord = [[935573.6496107538, 1915992.1465679]] # traffic 예선

# coord = [[935572.5718581281, 1915921.5779134321],  # 본선 1
#         [935598.8248811888, 1915969.74928734],  # 본선 2
#         [935653.9013579591, 1916094.918715149],  # 본선 3
#         [935649.0512258539, 1916200.4772990819],  # 본선 4
#         [935611.9092798139, 1916238.2176537951],  # 본선 5
#         [935642.5725363417, 1916135.2015287494],  # 본선 6
#         [935611.6110684255, 1916009.6253279469],  # 본선 7
#         [935591.4101814418, 1915967.54284438]]  # 본선 8 traffic 본선

# coord =[ [935615.350781, 1916230.19202],
# [935621.349077, 1916230.12465],
# [935617.350337, 1916230.15855],
# [935633.175165, 1916228.71866],
# [935639.028942, 1916223.42172],
# [935636.330342, 1916226.32573]] #본선 횡단보도 => [544,550/546,550/562.3,570.6/566.5,570.6]

class find_s:
    def __init__(self, path_name = path_name):
        GLOBAL_NPY = path_name
        PATH_ROOT=(os.path.dirname(os.path.abspath(os.path.dirname(os.path.abspath(os.path.dirname(__file__))))))+"/path/npy_file/path/"
        gp_name = PATH_ROOT + GLOBAL_NPY

        self.GB = GlobalPath(gp_name)

    def main(self, coord = coord):
        num = 0
        for i in coord:
            num += 1
            s_t, p_t = self.GB.xy2sl(i[0], i[1], mode = 1)
            print('s 좌표는 =>>', s_t)
        
        return s_t


if __name__ == '__main__':
    F = find_s()
    F.main()
